{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Header from \"../components/Header\";\nimport \"github-markdown-css/github-markdown.css\";\nexport default {\n  name: \"BlogDetail\",\n  components: {\n    Header: Header\n  },\n  data: function data() {\n    return {\n      blog: {\n        id: '',\n        title: \"haha\",\n        content: \"其实吧\"\n      },\n      ownBlog: false\n    };\n  },\n  methods: {\n    deleteBlog: function deleteBlog() {\n      var _this = this;\n\n      console.log(this.blog.id);\n      this.$axios.delete(\"/blog/\" + this.blog.id).then(function (res) {\n        // console.log(res);\n        if (res.data.code === 100) {\n          Element.Message.success(\"删除成功!\");\n          setTimeout(function (OK) {\n            _this.$router.push(\"/blogs\");\n          }, 1000);\n        }\n      });\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    var blogId = this.$route.params.blogId; // console.log(blogId);\n\n    if (blogId) {\n      this.$axios.get(\"/blog/\" + blogId).then(function (res) {\n        var blog = res.data.data;\n        _this2.blog.id = blog.id;\n        _this2.blog.title = blog.title; // this.blog.desription=blog.desription\n\n        var MardownIt = require(\"markdown-it\");\n\n        var it = new MardownIt();\n        var result = it.render(blog.content);\n        _this2.blog.content = result; //判断博客创作者与当前登陆者是不是一个人\n\n        _this2.ownBlog = blog.userId === _this2.$store.getters.getUser.id;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;EACAA,kBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC,IAHA,kBAGA;IACA;MACAC;QACAC,MADA;QAEAC,aAFA;QAGAC;MAHA,CADA;MAMAC;IANA;EAQA,CAZA;EAaAC;IACAC,UADA,wBACA;MAAA;;MACAC;MACA;QACA;QACA;UACAC;UACAC,WACA;YACA;UACA,CAHA,EAIA,IAJA;QAMA;MACA,CAXA;IAYA;EAfA,CAbA;EA8BAC,OA9BA,qBA8BA;IAAA;;IACA,uCADA,CAEA;;IACA;MACA;QACA;QACA;QACA,+BAHA,CAIA;;QACA;;QACA;QACA;QACA,6BARA,CASA;;QACA;MACA,CAXA;IAYA;EACA;AA/CA","names":["name","components","Header","data","blog","id","title","content","ownBlog","methods","deleteBlog","console","Element","setTimeout","created"],"sourceRoot":"src/views","sources":["BlogDetail.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <Header></Header>\r\n        <div class=\"mblog\">\r\n            <h2>{{blog.title}}</h2>\r\n            <el-link icon=\"el-icon-edit\" v-if=\"ownBlog\">\r\n                <router-link type=\"\" :to=\"{name: 'BlogEdit',params: {blogId: blog.id}}\">编辑</router-link>\r\n\r\n\r\n                <el-popconfirm\r\n                        confirm-button-text='确认'\r\n                        cancel-button-text='取消'\r\n                        icon=\"el-icon-info\"\r\n                        icon-color=\"red\"\r\n                        title=\"是否确认删除?\"\r\n                        @confirm=\"deleteBlog\"\r\n                >\r\n                    <el-button  slot=\"reference\"  style=\"margin-left: 20px\" type=\"danger\" icon=\"el-icon-delete\"></el-button>\r\n\r\n                </el-popconfirm>\r\n\r\n\r\n            </el-link>\r\n\r\n            <el-divider></el-divider>\r\n            <div class=\"markdown-body\" v-html=\"blog.content\"></div>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import Header from \"../components/Header\"\r\n    import \"github-markdown-css/github-markdown.css\"\r\n    export default {\r\n        name: \"BlogDetail\",\r\n        components: {Header},\r\n        data() {\r\n            return {\r\n                blog: {\r\n                    id: '',\r\n                    title: \"haha\",\r\n                    content: \"其实吧\"\r\n                },\r\n                ownBlog:false\r\n            }\r\n        },\r\n        methods: {\r\n          deleteBlog(){\r\n              console.log(this.blog.id);\r\n              this.$axios.delete(\"/blog/\"+this.blog.id).then(res=>{\r\n                  // console.log(res);\r\n                  if (res.data.code===100){\r\n                     Element.Message.success(\"删除成功!\")\r\n                      setTimeout(\r\n                          OK=>{\r\n                              this.$router.push(\"/blogs\")\r\n                          },\r\n                          1000\r\n                      )\r\n                  }\r\n              })\r\n          }\r\n        },\r\n        created() {\r\n            const blogId = this.$route.params.blogId\r\n            // console.log(blogId);\r\n            if (blogId) {\r\n                this.$axios.get(\"/blog/\" + blogId).then(res => {\r\n                    const blog = res.data.data\r\n                    this.blog.id = blog.id\r\n                    this.blog.title = blog.title\r\n                    // this.blog.desription=blog.desription\r\n                    var MardownIt=require(\"markdown-it\");\r\n                    let it = new MardownIt();\r\n                    let result = it.render(blog.content);\r\n                    this.blog.content = result;\r\n                    //判断博客创作者与当前登陆者是不是一个人\r\n                    this.ownBlog=(blog.userId===this.$store.getters.getUser.id);\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .mblog {\r\n        box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n        width: 100%;\r\n        min-height: 700px;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}