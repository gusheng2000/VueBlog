{"ast":null,"code":"/**\n * @Author: HuaChao Chen <chc>\n * @Date:   2017-05-03T00:31:20+08:00\n * @Email:  chenhuachaoxyz@gmail.com\n * @Filename: to-markdown.js\n * @Last modified by:   chc\n * @Last modified time: 2017-06-12T20:42:27+08:00\n * @License: MIT\n * @Copyright: 2017\n */\n\n/**\n * Created by zhy on 2017/4/9.\n */\nvar toMarkdown = require('to-markdown'); //\n\n\nvar coverterP = {\n  filter: 'P',\n  replacement: function replacement(content) {\n    return '\\n' + content;\n  }\n};\nvar coverterp = {\n  filter: 'p',\n  replacement: function replacement(content) {\n    return '\\n' + content;\n  }\n};\nvar coverterDiv = {\n  filter: 'DIV',\n  replacement: function replacement(content) {\n    return '\\n' + content;\n  }\n};\nvar coverterdiv = {\n  filter: 'div',\n  replacement: function replacement(content) {\n    return '\\n' + content;\n  }\n}; // 解析代码块\n\nvar coverterCode = {\n  filter: 'pre',\n  replacement: function replacement(content) {\n    var objE = document.createElement('div');\n    objE.innerHTML = content;\n    var codes = objE.getElementsByTagName('code');\n\n    if (codes !== null && codes.length > 0) {\n      var code = codes[0];\n      var codeType = code.getAttribute('class') === null ? '' : code.getAttribute('class');\n      var codeContent = code.innerText;\n      return '\\n```' + codeType + '\\n' + codeContent + '\\n```\\n';\n    }\n\n    return '\\n```\\n' + content + '\\n```\\n';\n  }\n}; // 解析表格\n\nvar coverterTable = {\n  filter: 'table',\n  replacement: function replacement(content) {\n    var table = document.createElement('table');\n    table.innerHTML = content;\n    var dom = '\\n';\n    var tableMark = '';\n    var thead = table.getElementsByTagName('thead')[0];\n    var thead_tr = thead.getElementsByTagName('tr')[0];\n    var thead_th = thead_tr.getElementsByTagName('th');\n\n    for (var i = 0; i < thead_th.length; i++) {\n      dom += '| ' + thead_th[i].innerText + ' ';\n      var text_align = thead_th[i].style.textAlign;\n\n      if (text_align === 'left') {\n        tableMark += '| :- ';\n      } else if (text_align === 'center') {\n        tableMark += '| :-: ';\n      } else if (text_align === 'right') {\n        tableMark += '| -: ';\n      } else {\n        tableMark += '| - ';\n      }\n\n      if (i === thead_th.length - 1) {\n        dom += '|\\n' + tableMark + ' |\\n';\n      }\n    }\n\n    var tbody;\n\n    if (table.getElementsByTagName('tbody')) {\n      tbody = table.getElementsByTagName('tbody')[0];\n      var tbody_tr = tbody.getElementsByTagName('tr');\n\n      if (tbody_tr.length > 0) {\n        for (var _i = 0; _i < tbody_tr.length; _i++) {\n          var tbody_td = tbody_tr[_i].getElementsByTagName('td');\n\n          for (var j = 0; j < tbody_td.length; j++) {\n            dom += '| ' + tbody_td[j].innerText + ' ';\n\n            if (j === tbody_td.length - 1) {\n              dom += '|\\n';\n            }\n          }\n        }\n      }\n    }\n\n    return dom;\n  }\n}; // 上角标\n\nvar coverterSup = {\n  filter: 'sup',\n  replacement: function replacement(content) {\n    return '^' + content + '^';\n  }\n}; // 下角标\n\nvar coverterSub = {\n  filter: 'sub',\n  replacement: function replacement(content) {\n    return '~' + content + '~';\n  }\n}; // 下划线\n\nvar coverterUnderline = {\n  filter: 'ins',\n  replacement: function replacement(content) {\n    return '++' + content + '++';\n  }\n}; // 中画线\n\nvar coverterStrikethrough = {\n  filter: 's',\n  replacement: function replacement(content) {\n    return '~~' + content + '~~';\n  }\n}; // 标记\n\nvar coverterMark = {\n  filter: 'mark',\n  replacement: function replacement(content) {\n    return '==' + content + '==';\n  }\n}; // 图片\n\nvar converterImg = {\n  filter: 'img',\n  replacement: function replacement(content, tag) {\n    var rel = tag.getAttribute('rel');\n    var alt = tag.getAttribute('alt');\n\n    if (rel && alt) {\n      return '![' + alt + ']' + '(' + rel + ')';\n    } else {\n      var src = tag.getAttribute('src');\n      return '![' + alt + ']' + '(' + src + ')';\n    }\n  }\n};\n\nvar tomarkdown = function tomarkdown(str) {\n  return toMarkdown(str, {\n    converters: [coverterCode, coverterTable, coverterSup, coverterSub, coverterUnderline, coverterStrikethrough, coverterMark, coverterP, coverterp, coverterDiv, coverterdiv, converterImg]\n  });\n};\n\nexport default tomarkdown;","map":{"version":3,"names":["toMarkdown","require","coverterP","filter","replacement","content","coverterp","coverterDiv","coverterdiv","coverterCode","objE","document","createElement","innerHTML","codes","getElementsByTagName","length","code","codeType","getAttribute","codeContent","innerText","coverterTable","table","dom","tableMark","thead","thead_tr","thead_th","i","text_align","style","textAlign","tbody","tbody_tr","tbody_td","j","coverterSup","coverterSub","coverterUnderline","coverterStrikethrough","coverterMark","converterImg","tag","rel","alt","src","tomarkdown","str","converters"],"sources":["D:/Work_Space/Demo/vueblog-vue/node_modules/mavon-editor/src/lib/core/to-markdown.js"],"sourcesContent":["/**\n * @Author: HuaChao Chen <chc>\n * @Date:   2017-05-03T00:31:20+08:00\n * @Email:  chenhuachaoxyz@gmail.com\n * @Filename: to-markdown.js\n * @Last modified by:   chc\n * @Last modified time: 2017-06-12T20:42:27+08:00\n * @License: MIT\n * @Copyright: 2017\n */\n\n/**\n * Created by zhy on 2017/4/9.\n */\nvar toMarkdown = require('to-markdown');\n//\nconst coverterP = {\n  filter: 'P',\n  replacement: function (content) {\n    return '\\n' + content\n  }\n}\nconst coverterp = {\n  filter: 'p',\n  replacement: function (content) {\n    return '\\n' + content\n  }\n}\nconst coverterDiv = {\n  filter: 'DIV',\n  replacement: function (content) {\n    return '\\n' + content\n  }\n}\nconst coverterdiv = {\n  filter: 'div',\n  replacement: function (content) {\n    return '\\n' + content\n  }\n}\n// 解析代码块\nconst coverterCode = {\n  filter: 'pre',\n  replacement: function (content) {\n    let objE = document.createElement('div');\n    objE.innerHTML = content;\n    let codes = objE.getElementsByTagName('code')\n    if (codes !== null && codes.length > 0) {\n      let code = codes[0]\n      let codeType = code.getAttribute('class') === null ? '' : code.getAttribute('class')\n      let codeContent = code.innerText\n      return '\\n```' + codeType + '\\n' + codeContent + '\\n```\\n';\n    }\n    return '\\n```\\n' + content + '\\n```\\n';\n  }\n}\n// 解析表格\nconst coverterTable = {\n  filter: 'table',\n  replacement: function (content) {\n    let table = document.createElement('table');\n    table.innerHTML = content;\n    let dom = '\\n';\n    let tableMark = '';\n    let thead = table.getElementsByTagName('thead')[0];\n    let thead_tr = thead.getElementsByTagName('tr')[0];\n    let thead_th = thead_tr.getElementsByTagName('th')\n    for (let i = 0; i < thead_th.length; i++) {\n      dom += '| ' + thead_th[i].innerText + ' '\n      let text_align = thead_th[i].style.textAlign\n      if (text_align === 'left') {\n        tableMark += '| :- '\n      } else if (text_align === 'center') {\n        tableMark += '| :-: '\n      } else if (text_align === 'right') {\n        tableMark += '| -: '\n      } else {\n        tableMark += '| - '\n      }\n      if (i === thead_th.length - 1) {\n        dom += '|\\n' + tableMark + ' |\\n'\n      }\n    }\n    let tbody\n    if (table.getElementsByTagName('tbody')) {\n      tbody = table.getElementsByTagName('tbody')[0];\n      let tbody_tr = tbody.getElementsByTagName('tr')\n      if (tbody_tr.length > 0) {\n        for (let i = 0; i < tbody_tr.length; i++) {\n          let tbody_td = tbody_tr[i].getElementsByTagName('td')\n          for (let j = 0; j < tbody_td.length; j++) {\n            dom += '| ' + tbody_td[j].innerText + ' ';\n            if (j === tbody_td.length - 1) {\n              dom += '|\\n';\n            }\n          }\n        }\n      }\n    }\n    return dom\n  }\n}\n// 上角标\nconst coverterSup = {\n  filter: 'sup',\n  replacement: function (content) {\n    return '^' + content + '^';\n  }\n}\n// 下角标\nconst coverterSub = {\n  filter: 'sub',\n  replacement: function (content) {\n    return '~' + content + '~';\n  }\n}\n// 下划线\nconst coverterUnderline = {\n  filter: 'ins',\n  replacement: function (content) {\n    return '++' + content + '++';\n  }\n}\n// 中画线\nconst coverterStrikethrough = {\n  filter: 's',\n  replacement: function (content) {\n    return '~~' + content + '~~';\n  }\n}\n// 标记\nconst coverterMark = {\n  filter: 'mark',\n  replacement: function (content) {\n    return '==' + content + '==';\n  }\n}\n// 图片\nconst converterImg = {\n    filter: 'img',\n    replacement: function(content, tag) {\n        var rel = tag.getAttribute('rel');\n        var alt = tag.getAttribute('alt');\n        if (rel && alt) {\n            return '![' + alt + ']' + '(' + rel + ')'\n        }\n        else {\n            var src = tag.getAttribute('src');\n            return '![' + alt + ']' + '(' + src + ')'\n        }\n    }\n}\nvar tomarkdown = function (str) {\n  return toMarkdown(str, {\n    converters: [\n      coverterCode,\n      coverterTable,\n      coverterSup,\n      coverterSub,\n      coverterUnderline,\n      coverterStrikethrough,\n      coverterMark,\n      coverterP,\n      coverterp,\n      coverterDiv,\n      coverterdiv,\n      converterImg\n    ]\n  });\n}\nexport default tomarkdown\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}